[{"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/index.js":"1","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/reportWebVitals.js":"2","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/App.jsx":"3","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/utils/constants.js":"4","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/lib/customHooks.js":"5","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/Book/Book.jsx":"6","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/AddBook/AddBook.jsx":"7","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/Home/Home.jsx":"8","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/updateBook/UpdateBook.jsx":"9","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/SignIn/SignIn.jsx":"10","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Footer/Footer.jsx":"11","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/ScrollToTop/ScrollToTop.jsx":"12","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Header/Header.jsx":"13","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/lib/common.js":"14","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/BackArrow/BackArrow.jsx":"15","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookForm/BookForm.jsx":"16","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BestRatedBooks/BestRatedBooks.jsx":"17","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookInfo/BookInfo.jsx":"18","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookRatingForm/BookRatingForm.jsx":"19","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookItem/BookItem.jsx":"20","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/lib/functions.jsx":"21"},{"size":592,"mtime":1699522587873,"results":"22","hashOfConfig":"23"},{"size":375,"mtime":1699522587879,"results":"24","hashOfConfig":"23"},{"size":1337,"mtime":1699522587855,"results":"25","hashOfConfig":"23"},{"size":402,"mtime":1699866235281,"results":"26","hashOfConfig":"23"},{"size":1336,"mtime":1699522587874,"results":"27","hashOfConfig":"23"},{"size":3754,"mtime":1701592108430,"results":"28","hashOfConfig":"23"},{"size":1396,"mtime":1699522587875,"results":"29","hashOfConfig":"23"},{"size":1378,"mtime":1699522587877,"results":"30","hashOfConfig":"23"},{"size":1754,"mtime":1699522587879,"results":"31","hashOfConfig":"23"},{"size":4351,"mtime":1699522587878,"results":"32","hashOfConfig":"23"},{"size":903,"mtime":1699522587861,"results":"33","hashOfConfig":"23"},{"size":246,"mtime":1699522587863,"results":"34","hashOfConfig":"23"},{"size":1324,"mtime":1699522587862,"results":"35","hashOfConfig":"23"},{"size":4289,"mtime":1699522587874,"results":"36","hashOfConfig":"23"},{"size":410,"mtime":1699522587856,"results":"37","hashOfConfig":"23"},{"size":4165,"mtime":1699522587858,"results":"38","hashOfConfig":"23"},{"size":703,"mtime":1699522587857,"results":"39","hashOfConfig":"23"},{"size":1082,"mtime":1699522587858,"results":"40","hashOfConfig":"23"},{"size":2030,"mtime":1701592041531,"results":"41","hashOfConfig":"23"},{"size":1472,"mtime":1699522587859,"results":"42","hashOfConfig":"23"},{"size":1678,"mtime":1700737390606,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"f3l1nr",{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62"},{"filePath":"63","messages":"64","suppressedMessages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"66","messages":"67","suppressedMessages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","suppressedMessages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"72","messages":"73","suppressedMessages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","suppressedMessages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","suppressedMessages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","suppressedMessages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","suppressedMessages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"87","messages":"88","suppressedMessages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","suppressedMessages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"93","messages":"94","suppressedMessages":"95","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","suppressedMessages":"98","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","suppressedMessages":"101","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"102","messages":"103","suppressedMessages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"105","messages":"106","suppressedMessages":"107","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/index.js",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/reportWebVitals.js",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/App.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/utils/constants.js",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/lib/customHooks.js",["108","109"],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/Book/Book.jsx",["110"],["111"],"/* eslint-disable react/jsx-props-no-spreading */\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useUser } from '../../lib/customHooks';\nimport styles from './Book.module.css';\nimport { getBook, deleteBook } from '../../lib/common';\nimport BookInfo from '../../components/Books/BookInfo/BookInfo';\nimport BookRatingForm from '../../components/Books/BookRatingForm/BookRatingForm';\nimport BookDeleteImage from '../../images/book_delete.png';\nimport BestRatedBooks from '../../components/Books/BestRatedBooks/BestRatedBooks';\nimport BackArrow from '../../components/BackArrow/BackArrow';\n\nfunction Book() {\n  const { connectedUser, userLoading } = useUser();\n  const [book, setBook] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [userRated, setUserRated] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const params = useParams();\n\n  useEffect(() => {\n    async function getItem() {\n      const data = await getBook(params.id);\n      if (data) {\n        setBook(data);\n      }\n    }\n    getItem();\n  }, [params.id]);\n\n  useEffect(() => {\n    if (!userLoading && connectedUser && book?.title) {\n      const rate = book.ratings.find((elt) => elt.userId === connectedUser.userId);\n      if (rate) {\n        setUserRated(true);\n        setRating(parseInt(rate.grade, 10));\n        setLoading(false);\n      } else {\n        setUserRated(false);\n        setRating(0);\n        setLoading(false);\n      }\n    } else if (!userLoading && !connectedUser && book) {\n      setLoading(false);\n    }\n  }, [book, userLoading]);\n\n  const onDelete = async (e) => {\n    if (e.key && e.key !== 'Enter') {\n      return;\n    }\n    // eslint-disable-next-line no-restricted-globals\n    const check = confirm('Etes vous sûr de vouloir supprimer ce livre ?');\n    if (check) {\n      const del = await deleteBook(book.id);\n      if (del) {\n        setBook((oldValue) => ({ ...oldValue, delete: true }));\n      }\n    }\n  };\n\n  const loadingContent = (<h1>Chargement ...</h1>);\n\n  const bookContent = !loading && !book.delete ? (\n    <div>\n      <div className={styles.Book}>\n        <div className={styles.BookImage} style={{ backgroundImage: `url(\"${book.imageUrl}\")` }} />\n        <div className={styles.BookContent}>\n          {book?.userId === connectedUser?.userId ? (\n            <div className={styles.Owner}>\n              <p>Vous avez publié cet ouvrage, vous pouvez le :</p>\n              <p>\n                <Link to={`/livre/modifier/${book.id}`}>modifier</Link>\n                {' '}\n                <span tabIndex={0} role=\"button\" onKeyUp={onDelete} onClick={onDelete}>supprimer</span>\n                {' '}\n              </p>\n            </div>\n          ) : null}\n          <BookInfo book={book} />\n          <BookRatingForm\n            userRated={userRated}\n            userId={connectedUser?.userId}\n            rating={rating}\n            setRating={setRating}\n            setBook={setBook}\n            id={book.id}\n          />\n        </div>\n      </div>\n      <hr />\n      <BestRatedBooks />\n    </div>\n  ) : null;\n  const deletedContent = book?.delete ? (\n    <div className={styles.Deleted}>\n      <h1>{book.title}</h1>\n      <p>a bien été supprimé</p>\n      <img src={BookDeleteImage} alt={`Le livre ${book.title} a bien été supprimé`} />\n      <Link to=\"/\">\n        <button type=\"button\">{'Retour à l\\'accueil'}</button>\n      </Link>\n    </div>\n  ) : null;\n\n  return (\n    <div className=\"content-container\">\n      <BackArrow />\n      {loading ? loadingContent : null}\n      <div className={styles.BookContainer}>\n        {bookContent}\n      </div>\n      {book?.delete ? deletedContent : null}\n\n    </div>\n  );\n}\nexport default Book;\n","/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/AddBook/AddBook.jsx",["112"],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/Home/Home.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/updateBook/UpdateBook.jsx",["113","114"],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/pages/SignIn/SignIn.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Footer/Footer.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/ScrollToTop/ScrollToTop.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Header/Header.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/lib/common.js",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/BackArrow/BackArrow.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookForm/BookForm.jsx",["115","116"],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BestRatedBooks/BestRatedBooks.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookInfo/BookInfo.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookRatingForm/BookRatingForm.jsx",["117"],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/components/Books/BookItem/BookItem.jsx",[],[],"/Users/rdrouet/Documents/PERSONNEL/OCR/OCR-P7/mon-vieux-grimoire/frontend/src/lib/functions.jsx",[],[],{"ruleId":"118","severity":1,"message":"119","line":49,"column":6,"nodeType":"120","endLine":49,"endColumn":26,"suggestions":"121"},{"ruleId":"118","severity":1,"message":"122","line":49,"column":7,"nodeType":"123","endLine":49,"endColumn":25},{"ruleId":"118","severity":1,"message":"124","line":48,"column":6,"nodeType":"120","endLine":48,"endColumn":25,"suggestions":"125"},{"ruleId":"126","severity":2,"message":"127","line":55,"column":19,"nodeType":"128","messageId":"129","endLine":55,"endColumn":26,"suppressions":"130"},{"ruleId":"118","severity":1,"message":"131","line":20,"column":6,"nodeType":"120","endLine":20,"endColumn":19,"suggestions":"132"},{"ruleId":"118","severity":1,"message":"131","line":23,"column":6,"nodeType":"120","endLine":23,"endColumn":19,"suggestions":"133"},{"ruleId":"118","severity":1,"message":"134","line":32,"column":6,"nodeType":"120","endLine":32,"endColumn":8,"suggestions":"135"},{"ruleId":"118","severity":1,"message":"136","line":30,"column":6,"nodeType":"120","endLine":30,"endColumn":12,"suggestions":"137"},{"ruleId":"118","severity":1,"message":"138","line":44,"column":6,"nodeType":"120","endLine":44,"endColumn":17,"suggestions":"139"},{"ruleId":"118","severity":1,"message":"140","line":28,"column":6,"nodeType":"120","endLine":28,"endColumn":17,"suggestions":"141"},"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'file' and 'imgSrc'. Either include them or remove the dependency array.","ArrayExpression",["142"],"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","ChainExpression","React Hook useEffect has a missing dependency: 'connectedUser'. Either include it or remove the dependency array.",["143"],"no-restricted-globals","Unexpected use of 'confirm'.","Identifier","defaultMessage",["144"],"React Hook useEffect has missing dependencies: 'auth', 'connectedUser', and 'navigate'. Either include them or remove the dependency array.",["145"],["146"],"React Hook useEffect has a missing dependency: 'params.id'. Either include it or remove the dependency array.",["147"],"React Hook useEffect has a missing dependency: 'reset'. Either include it or remove the dependency array.",["148"],"React Hook useEffect has a missing dependency: 'book'. Either include it or remove the dependency array.",["149"],"React Hook useEffect has a missing dependency: 'setRating'. Either include it or remove the dependency array. If 'setRating' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["150"],{"desc":"151","fix":"152"},{"desc":"153","fix":"154"},{"kind":"155","justification":"156"},{"desc":"157","fix":"158"},{"desc":"157","fix":"159"},{"desc":"160","fix":"161"},{"desc":"162","fix":"163"},{"desc":"164","fix":"165"},{"desc":"166","fix":"167"},"Update the dependencies array to be: [file, imgSrc]",{"range":"168","text":"169"},"Update the dependencies array to be: [book, connectedUser, userLoading]",{"range":"170","text":"171"},"directive","","Update the dependencies array to be: [auth, connectedUser, navigate, userLoading]",{"range":"172","text":"173"},{"range":"174","text":"173"},"Update the dependencies array to be: [params.id]",{"range":"175","text":"176"},"Update the dependencies array to be: [book, reset]",{"range":"177","text":"178"},"Update the dependencies array to be: [book, formState]",{"range":"179","text":"180"},"Update the dependencies array to be: [formState, setRating]",{"range":"181","text":"182"},[1280,1300],"[file, imgSrc]",[1600,1619],"[book, connectedUser, userLoading]",[727,740],"[auth, connectedUser, navigate, userLoading]",[860,873],[1047,1049],"[params.id]",[1040,1046],"[book, reset]",[1438,1449],"[book, formState]",[983,994],"[formState, setRating]"]